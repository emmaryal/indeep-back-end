(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{416:function(e,t,c){},418:function(e,t,c){},443:function(e,t){},445:function(e,t){},487:function(e,t){},488:function(e,t){},726:function(e,t,c){},728:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(59),r=c.n(a),s=c(126),i=c(19),o=c(378),l=(c(416),c(13)),u=c.n(l),j=c(23),d=c(58),b=c(31),h=(c(417),c(418),c(17)),p=c(12),O=c(223);c(419);O.a.initializeApp({apiKey:"AIzaSyBIbwwrFQIL6aBUG_5dkP65UtnG-_E0jyM",authDomain:"indeep-3ec84.firebaseapp.com",databaseURL:"https://indeep-3ec84-default-rtdb.europe-west1.firebasedatabase.app",projectId:"indeep-3ec84",storageBucket:"indeep-3ec84.appspot.com",messagingSenderId:"77708790062",appId:"1:77708790062:web:131c03f849690e3a6352bf"});var m=O.a.auth(),x=new O.a.auth.GoogleAuthProvider,f=c(735),g=c(741),v=c(742),N=c(29),y=c(35),w=c.n(y),S=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/create-or-update-user"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/current-user"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/current-admin"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=c(2),I=function(e){var t=e.history,c=Object(n.useState)("emma.ryal@gmail.com"),a=Object(p.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)("123456"),l=Object(p.a)(o,2),d=l[0],O=l[1],y=Object(n.useState)(!1),w=Object(p.a)(y,2),k=w[0],A=w[1],I=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){t.location.state||I&&I.token&&t.push("/")}),[I,t]);var E=Object(i.b)(),R=function(e){var c=t.location.state;c?t.push(c.from):"admin"===e.data.role?t.push("/admin/dashboard"):t.push("user/history")},T=function(){var e=Object(j.a)(u.a.mark((function e(c){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),A(!0),e.prev=2,e.next=5,m.signInWithEmailAndPassword(r,d);case 5:return n=e.sent,console.log("result :",n),a=n.user,e.next=10,a.getIdTokenResult();case 10:s=e.sent,S(s.token).then((function(e){console.log("CREATE OR UPDATE RES : ",e),E({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:s.token,role:e.data.role,_id:e.data._id}}),R(e)})).catch((function(e){return console.log(e)})),t.push("/"),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0),b.b.error(e.t0.message),A(!1);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.signInWithPopup(x).then(function(){var e=Object(j.a)(u.a.mark((function e(t){var c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.user,e.next=3,c.getIdTokenResult();case 3:n=e.sent,S(n.token).then((function(e){console.log("CREATE OR UPDATE RES : ",e),E({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:n.token,role:e.data.role,id:e.data.id}}),R(e)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),b.b.error(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"container p-5",children:Object(C.jsx)("div",{className:"row",children:Object(C.jsxs)("div",{className:"col-md-6 offset-md-3",children:[k?Object(C.jsx)("h4",{className:"text-danger",children:"loading..."}):Object(C.jsx)("h4",{children:"Login"}),Object(C.jsxs)("form",{onSubmit:T,children:[Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Your email",autoFocus:!0})}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)("input",{type:"password",className:"form-control",value:d,onChange:function(e){return O(e.target.value)},placeholder:"Your password"})}),Object(C.jsx)("br",{}),Object(C.jsx)(f.a,{onClick:T,type:"primary",className:"mb-3",block:!0,shape:"round",icon:Object(C.jsx)(g.a,{}),size:"large",disabled:!r||d.length<6,children:"Login with Email/Password"})]}),Object(C.jsx)(f.a,{onClick:D,type:"danger",className:"mb-3",block:!0,shape:"round",icon:Object(C.jsx)(v.a,{}),size:"large",children:"Login with Google"}),Object(C.jsx)(N.b,{to:"/forgot/password",className:"float-right text-danger",children:"Forgot Password"})]})})})})},E=function(e){var t=e.history,c=Object(n.useState)(""),a=Object(p.a)(c,2),r=a[0],s=a[1],o=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){o&&o.token&&t.push("/")}),[o,t]);var l=function(){var e=Object(j.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={url:"'http://localhost:3000/register/complete",handleCodeInApp:!0},e.next=4,m.sendSignInLinkToEmail(r,c);case 4:b.b.success("Email is sent to ".concat(r,". Click the link to complete your registration.")),window.localStorage.setItem("emailForRegistration",r),s("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"container p-5",children:Object(C.jsx)("div",{className:"row",children:Object(C.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(C.jsx)("h4",{children:"Register"}),Object(C.jsxs)("form",{onSubmit:l,children:[Object(C.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Your email",autoFocus:!0}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Register"})]})]})})})})},R=c(733),T=c(148),D=c(743),P=c(744),F="data:image/jpeg;base64,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",U=c(150),B=c.n(U),L=R.a.Meta,V=function(e){var t=e.product,c=t.images,a=t.title,r=(t.description,t.slug),s=(t.artist,t.label,t.price,Object(n.useState)("Click to add")),o=Object(p.a)(s,2),l=o[0],u=o[1],j=Object(i.c)((function(e){return Object(h.a)({},e)})),d=(j.user,j.cart,Object(i.b)());return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(R.a,{cover:Object(C.jsx)("img",{src:c&&c.length?c[0].url:F,style:{height:"250px",objectFit:"cover"},className:"p-1"}),actions:[Object(C.jsxs)(N.b,{to:"/product/".concat(r),children:[Object(C.jsx)(D.a,{className:"text-warning"})," ",Object(C.jsx)("br",{})," View Product"]}),Object(C.jsx)(T.a,{title:l,children:Object(C.jsxs)("a",{onClick:function(){var e=[];if("undefined"!==typeof window){localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart"))),e.push(Object(h.a)(Object(h.a)({},t),{},{count:1}));var c=B.a.uniqWith(e,B.a.isEqual);localStorage.setItem("cart",JSON.stringify(c)),u("Added"),d({type:"ADD_TO_CART",payload:c}),d({type:"SET_VISIBLE",payload:!0})}},disabled:t.quantity<1,children:[Object(C.jsx)(P.a,{className:"text-danger"})," ",Object(C.jsx)("br",{}),t.quantity<1?"Out of Stock":"Add to Cart"]})})],children:Object(C.jsx)(L,{title:a})})})},Q=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/product"),t,{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/products/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("".concat("https://indeeprecords.herokuapp.com/api","/product/").concat(t),{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/product/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(u.a.mark((function e(t,c,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("".concat("https://indeeprecords.herokuapp.com/api","/product/").concat(t),c,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(u.a.mark((function e(t,c,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/products"),{sort:t,order:c,page:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/products/total"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/product/related/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/search/filters"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=c(734),_=function(e){var t=e.count;return Object(C.jsx)("div",{className:"row pb-5",children:function(){for(var e=[],c=0;c<t;c++)e.push(Object(C.jsx)(R.a,{className:"col-md-3",children:Object(C.jsx)(Y.a,{active:!0})},c));return e}()})},J=c(731),Z=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(p.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)(1),u=Object(p.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)(1),h=Object(p.a)(b,2),O=h[0],m=h[1];Object(n.useEffect)((function(){x()}),[j]),Object(n.useEffect)((function(){z().then((function(e){return m(e.data)}))}),[]);var x=function(){o(!0),G("sold","desc",j).then((function(e){a(e.data),o(!1)}))};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"container",children:i?Object(C.jsx)(_,{count:4}):Object(C.jsx)("div",{className:"row",children:c.map((function(e){return Object(C.jsx)("div",{className:"col-md-3",children:Object(C.jsx)(V,{product:e})},e._id)}))})}),Object(C.jsx)("div",{className:"row",children:Object(C.jsx)("nav",{className:"col-md-4 offset-md-4 text-center pt-5 p-3",children:Object(C.jsx)(J.a,{current:j,total:O/4*10,onChange:function(e){return d(e)}})})})]})},$=c(385),ee=c.n($),te=function(e){var t=e.text;return Object(C.jsx)(ee.a,{options:{strings:t,autoStart:!0,loop:!0}})},ce=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(p.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)(1),u=Object(p.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)(1),h=Object(p.a)(b,2),O=h[0],m=h[1];Object(n.useEffect)((function(){x()}),[j]),Object(n.useEffect)((function(){z().then((function(e){return m(e.data)}))}),[]);var x=function(){o(!0),G("createdAt","desc",j).then((function(e){a(e.data),o(!1)}))};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"container",children:i?Object(C.jsx)(_,{count:4}):Object(C.jsx)("div",{className:"row",children:c.map((function(e){return Object(C.jsx)("div",{className:"col-md-3",children:Object(C.jsx)(V,{product:e})},e._id)}))})}),Object(C.jsx)("div",{className:"row",children:Object(C.jsx)("nav",{className:"col-md-4 offset-md-4 text-center pt-5 p-3",children:Object(C.jsx)(J.a,{current:j,total:O/4*10,onChange:function(e){return d(e)}})})})]})},ne=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/categories"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/category/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("".concat("https://indeeprecords.herokuapp.com/api","/category/").concat(t),{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),se=function(){var e=Object(j.a)(u.a.mark((function e(t,c,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("".concat("https://indeeprecords.herokuapp.com/api","/category/").concat(t),c,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/category"),t,{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),oe=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(p.a)(r,2),i=s[0],o=s[1];Object(n.useEffect)((function(){o(!0),ne().then((function(e){a(e.data),o(!1)}))}),[]);return Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row",children:i?Object(C.jsx)("h4",{className:"text-center",children:"Loading..."}):c.map((function(e){return Object(C.jsx)("div",{className:"col btn btn-outlined-primary btn-lg btn-block btn-raised m-3",children:Object(C.jsx)(N.b,{to:"/category/".concat(e.slug),children:e.name})},e._id)}))})})},le=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/subs"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(p.a)(r,2),i=s[0],o=s[1];Object(n.useEffect)((function(){o(!0),le().then((function(e){a(e.data),o(!1)}))}),[]);return Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row",children:i?Object(C.jsx)("h4",{className:"text-center",children:"Loading..."}):c.map((function(e){return Object(C.jsx)("div",{className:"col btn btn-outlined-primary btn-lg btn-block btn-raised m-3",children:Object(C.jsx)(N.b,{to:"/sub/".concat(e.slug),children:e.name})},e._id)}))})})},je=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"jumbotron h2 text-center font-weight-bold",style:{font:"AmericanTypewriter"},children:Object(C.jsx)(te,{text:["InDeep Records","Rare & Hard to Find Vinyl"]})}),Object(C.jsx)("h5",{className:"text-center  p-3 mt-5 mb-5 display-3 jumbotron ",children:"New Arrivals"}),Object(C.jsx)(ce,{}),Object(C.jsx)("h5",{className:"text-center p-3 mt-5 mb-5 display-3 jumbotron ",children:"Best Sellers"}),Object(C.jsx)(Z,{}),Object(C.jsx)("h5",{className:"text-center p-3 mt-5 mb-5 display-3 jumbotron ",children:"Categories"}),Object(C.jsx)(oe,{}),Object(C.jsx)("h4",{className:"text-center p-3 mt-5 mb-5 display-3 jumbotron ",children:"Sub Categories"}),Object(C.jsx)(ue,{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{})]})},de=c(732),be=c(737),he=c(745),pe=c(746),Oe=c(747),me=c(748),xe=c(749),fe=c(750),ge=c(405),ve=c(407),Ne=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return Object(h.a)({},e)})).search.text,c=Object(d.f)();return Object(C.jsxs)("form",{className:"form-inline my-2 my-lg-0",onSubmit:function(e){e.preventDefault(),c.push("/shop?".concat(t))},children:[Object(C.jsx)("input",{onChange:function(t){e({type:"SEARCH_QUERY",payload:{text:t.target.value}})},type:"search",value:t,className:"form-control mr-sm-2",placeholder:"Search"}),Object(C.jsx)(ve.a,{})]})},ye=de.a.SubMenu,we=de.a.Item,Se=function(){var e=Object(n.useState)("home"),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(i.b)(),s=Object(i.c)((function(e){return Object(h.a)({},e)})),o=s.user,l=s.cart,u=Object(d.f)();return Object(C.jsxs)(de.a,{onClick:function(e){a(e.key)},selectedKeys:[c],mode:"horizontal",children:[Object(C.jsx)(we,{icon:Object(C.jsx)(he.a,{}),children:Object(C.jsx)(N.b,{to:"/",children:"   Home  "})},"home"),Object(C.jsx)(we,{icon:Object(C.jsx)(pe.a,{}),children:Object(C.jsx)(N.b,{to:"/shop",children:"   Shop  "})},"shop"),Object(C.jsx)(we,{icon:Object(C.jsx)(P.a,{}),children:Object(C.jsx)(N.b,{to:"/cart",children:Object(C.jsx)(be.a,{count:l.length,offset:[9,0],children:"Cart"})})},"cart"),!o&&Object(C.jsx)(we,{icon:Object(C.jsx)(Oe.a,{}),className:"float-right",children:Object(C.jsx)(N.b,{to:"/register",children:"   Register "})},"register"),!o&&Object(C.jsx)(we,{icon:Object(C.jsx)(me.a,{}),className:"float-right",children:Object(C.jsx)(N.b,{to:"/login",children:"   Login "})},"login"),o&&Object(C.jsxs)(ye,{icon:Object(C.jsx)(xe.a,{}),title:o.email&&o.email.split("@")[0],className:"float-right",children:[o&&"subscriber"===o.role&&Object(C.jsx)(we,{children:Object(C.jsx)(N.b,{to:"/user/history",children:"Dashboard"})}),o&&"admin"===o.role&&Object(C.jsx)(we,{children:Object(C.jsx)(N.b,{to:"/admin/dashboard",children:"Dashboard"})}),Object(C.jsx)(we,{icon:Object(C.jsx)(fe.a,{}),onClick:function(){ge.a.auth().signOut(),r({type:"LOGOUT",payload:null}),u.push("/login")},children:"Logout"})]}),Object(C.jsx)("span",{className:"float-right p-1",children:Object(C.jsx)(Ne,{})})]})},ke=function(e){var t=e.history,c=Object(n.useState)(""),a=Object(p.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(""),l=Object(p.a)(o,2),d=l[0],O=l[1],x=(Object(i.c)((function(e){return Object(h.a)({},e)})).user,Object(i.b)());Object(n.useEffect)((function(){s(window.localStorage.getItem("emailForRegistration"))}),[t]);var f=function(){var e=Object(j.a)(u.a.mark((function e(c){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),r&&d){e.next=4;break}return b.b.error("Email and password is required"),e.abrupt("return");case 4:if(!(d.length<6)){e.next=7;break}return b.b.error("Password must be at least 6 characters long"),e.abrupt("return");case 7:return e.prev=7,e.next=10,m.signInWithEmailLink(r,window.location.href);case 10:if(!e.sent.user.emailVerified){e.next=22;break}return window.localStorage.removeItem("emailForRegistration"),n=m.currentUser,e.next=16,n.updatePassword(d);case 16:return e.next=18,n.getIdTokenResult();case 18:a=e.sent,console.log("user",n,"idTokenResult",a),S(a.token).then((function(e){x({type:"LOGGED_IN_USER",payload:{email:e.data.email,name:e.data.name,token:a.token,role:e.data.role,_id:e.data._id}})})).catch((function(e){return console.log(e)})),t.push("/");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(7),console.log(e.t0),b.b.error(e.t0.message);case 28:case"end":return e.stop()}}),e,null,[[7,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"container p-5",children:Object(C.jsx)("div",{className:"row",children:Object(C.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(C.jsx)("h4",{children:"Register Complete"}),Object(C.jsxs)("form",{onSubmit:f,children:[Object(C.jsx)("input",{type:"email",className:"form-control",value:r,disabled:!0}),Object(C.jsx)("input",{type:"password",className:"form-control",value:d,onChange:function(e){return O(e.target.value)},placeholder:"Password",autoFocus:!0}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Complete Registration"})]})]})})})},Ae=function(e){var t=e.history,c=Object(n.useState)(""),a=Object(p.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(!1),l=Object(p.a)(o,2),d=l[0],O=l[1],x=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){x&&x.token&&t.push("/")}),[x,t]);var f=function(){var e=Object(j.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O(!0),c={url:"'http://localhost:3000/login",handleCodeInApp:!0},e.next=5,m.sendPasswordResetEmail(r,c).then((function(){s(""),O(!1),b.b.success("Check your email for password reset link")})).catch((function(e){O(!1),b.b.error(e.message)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"container col-md-6 offset-md-3 p-5",children:[d?Object(C.jsx)("h4",{className:"text-danger",children:"Loading"}):Object(C.jsx)("h4",{children:"Forgot Password"}),Object(C.jsxs)("form",{onSubmit:f,children:[Object(C.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Type your email",autoFocus:!0}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{className:"btn btn-raised",disabled:!r,children:"Submit"})]})]})},Ce=function(){return Object(C.jsx)("nav",{children:Object(C.jsxs)("ul",{className:"nav flex-column",children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(N.b,{to:"/user/history",className:"nav-link",children:"History"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(N.b,{to:"/user/password",className:"nav-link",children:"Password"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(N.b,{to:"/user/wishlist",className:"nav-link",children:"Wish List"})})]})})},Ie=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/user/cart"),{cart:t},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/user/cart"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("".concat("https://indeeprecords.herokuapp.com/api","/user/cart"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/user/address"),{address:c},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),De=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/user/order"),{stripeResponse:t},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/user/orders"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/user/wishlist"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("".concat("https://indeeprecords.herokuapp.com/api","/user/wishlist/").concat(t),{},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Be=function(){var e=Object(j.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/user/wishlist"),{productId:t},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Le=function(e){var t=e.order,c=e.showStatus,n=void 0===c||c;return Object(C.jsx)("div",{className:"",children:Object(C.jsxs)("p",{children:[Object(C.jsxs)("span",{children:["Order Id: ",t.paymentIntent.id]})," / ",Object(C.jsxs)("span",{children:["Amount:"," / ",(t.paymentIntent.amount/=100).toLocaleString("en-UK",{style:"currency",currency:"EUR"})]})," / ",Object(C.jsxs)("span",{children:["Currency: ",t.paymentIntent.currency.toUpperCase()]})," / ",Object(C.jsxs)("span",{children:["Method: ",t.paymentIntent.payment_method_types[0]]})," / ",Object(C.jsxs)("span",{children:["Payment: ",t.paymentIntent.status.toUpperCase()]})," / ",Object(C.jsxs)("span",{children:["Ordered On:"," ",new Date(1e3*t.paymentIntent.created).toLocaleString()]})," / ",Object(C.jsx)("br",{}),n?Object(C.jsxs)("span",{className:"badge bg-primary text-white",children:["STATUS: ",t.orderStatus]}):null]})})},Ve=c(64),Qe=c(70),He=Ve.StyleSheet.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:24,textAlign:"center"},author:{fontSize:12,textAlign:"center",marginBottom:40},subtitle:{fontSize:18,margin:12},text:{margin:12,fontSize:14,textAlign:"justify"},image:{marginVertical:15,marginHorizontal:100},header:{fontSize:12,marginBottom:20,textAlign:"center",color:"grey"},footer:{padding:"100px",fontSize:12,marginBottom:20,textAlign:"center",color:"grey"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"}}),Ke=function(e){var t=e.order;return Object(C.jsx)(Ve.Document,{children:Object(C.jsxs)(Ve.Page,{style:He.body,children:[Object(C.jsxs)(Ve.Text,{style:He.header,fixed:!0,children:["~ ",(new Date).toLocaleString()," ~"]}),Object(C.jsx)(Ve.Text,{style:He.title,children:"Order Invoice"}),Object(C.jsx)(Ve.Text,{style:He.author,children:"Indeep Records"}),Object(C.jsx)(Ve.Text,{style:He.subtitle,children:"Order Summary"}),Object(C.jsx)(Qe.Table,{children:Object(C.jsxs)(Qe.TableHeader,{children:[Object(C.jsx)(Qe.TableCell,{children:"Title"}),Object(C.jsx)(Qe.TableCell,{children:"Artist"}),Object(C.jsx)(Qe.TableCell,{children:"Label"}),Object(C.jsx)(Qe.TableCell,{children:"Count"}),Object(C.jsx)(Qe.TableCell,{children:"Price"})]})}),Object(C.jsx)(Qe.Table,{data:t.products,children:Object(C.jsxs)(Qe.TableBody,{children:[Object(C.jsx)(Qe.DataTableCell,{getContent:function(e){return e.product.title}}),Object(C.jsx)(Qe.DataTableCell,{getContent:function(e){return e.product.artist}}),Object(C.jsx)(Qe.DataTableCell,{getContent:function(e){return e.product.label}}),Object(C.jsx)(Qe.DataTableCell,{getContent:function(e){return e.count}}),Object(C.jsx)(Qe.DataTableCell,{getContent:function(e){return"\u20ac".concat(e.product.price)}})]})}),Object(C.jsxs)(Ve.Text,{style:He.text,children:[Object(C.jsxs)(Ve.Text,{children:["Date: ","               ",new Date(1e3*t.paymentIntent.created).toLocaleString()]}),"\n",Object(C.jsxs)(Ve.Text,{children:["Order Id: ","         ",t.paymentIntent.id]}),"\n",Object(C.jsxs)(Ve.Text,{children:["Order Status: ","  ",t.orderStatus]}),"\n",Object(C.jsxs)(Ve.Text,{children:["Total Paid: ","       ","\u20ac",t.paymentIntent.amount]})]}),Object(C.jsx)(Ve.Text,{style:He.footer,children:" ~ Thank you for shopping with us ~ "})]})})},We=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){s()}),[]);var s=function(){return Pe(r.token).then((function(e){console.log(JSON.stringify(e.data,null,4)),a(e.data)}))},o=function(e){return Object(C.jsxs)("table",{className:"table table-bordered",children:[Object(C.jsx)("thead",{className:"thead-light",children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{scope:"col",children:"Title"}),Object(C.jsx)("th",{scope:"col",children:"Artist"}),Object(C.jsx)("th",{scope:"col",children:"Label"}),Object(C.jsx)("th",{scope:"col",children:"Price"}),Object(C.jsx)("th",{scope:"col",children:"Count"})]})}),Object(C.jsx)("tbody",{children:e.products.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsx)("b",{children:e.product.title})}),Object(C.jsx)("td",{children:e.product.artist}),Object(C.jsx)("td",{children:e.product.label}),Object(C.jsxs)("td",{children:["\u20ac",e.product.price]}),Object(C.jsx)("td",{children:e.count})]},t)}))})]})},l=function(e){return Object(C.jsx)(Ve.PDFDownloadLink,{document:Object(C.jsx)(Ke,{order:e}),fileName:"invoice.pdf",className:"btn btn-sm btn-block btn-outline-primary",children:"Download PDF"})};return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-2",children:Object(C.jsx)(Ce,{})}),Object(C.jsxs)("div",{className:"col text-center",children:[Object(C.jsx)("h4",{children:c.length>0?"User purchase orders":"No purchase orders"}),c.map((function(e,t){return Object(C.jsxs)("div",{className:"m-5 p-3 card",children:[Object(C.jsx)(Le,{order:e}),o(e),Object(C.jsx)("div",{className:"row",children:Object(C.jsx)("div",{className:"col",children:l(e)})})]},t)}))]})]})})},qe=c(222),Ge=function(){var e=Object(n.useState)(5),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(d.f)();return Object(n.useEffect)((function(){var e=setInterval((function(){a((function(e){return--e}))}),1e3);return 0===c&&r.push("/"),function(){return clearInterval(e)}}),[c]),Object(C.jsx)("div",{className:"container p-5 text-center",children:Object(C.jsxs)("p",{children:["Redirecting you in ",c," seconds"]})})},ze=function(e){e.children;var t=Object(qe.a)(e,["children"]),c=Object(i.c)((function(e){return Object(h.a)({},e)})).user;return c&&c.token?Object(C.jsx)(d.a,Object(h.a)({},t)):Object(C.jsx)(Ge,{})},Me=function(e){e.children;var t=Object(qe.a)(e,["children"]),c=Object(i.c)((function(e){return Object(h.a)({},e)})).user,a=Object(n.useState)(!1),r=Object(p.a)(a,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){c&&c.token&&A(c.token).then((function(e){console.log("CURRENT ADMIN RES",e),o(!0)})).catch((function(e){console.log("ADMIN ROUTE ERR",e),o(!1)}))}),[c]),s?Object(C.jsx)(d.a,Object(h.a)({},t)):Object(C.jsx)(Ge,{})},Xe=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(p.a)(r,2),i=s[0],o=s[1],l=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(!0),e.next=4,m.currentUser.updatePassword(c).then((function(){o(!1),a(""),b.b.success("Password updated")})).catch((function(e){o(!1),b.b.error(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col md-2",children:Object(C.jsx)(Ce,{})}),Object(C.jsxs)("div",{className:"col",children:[i?Object(C.jsx)("h4",{className:"text-danger",children:" Loading..."}):Object(C.jsx)("h4",{children:"Password Update"}),Object(C.jsx)("form",{onSubmit:l,children:Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Your Password"}),Object(C.jsx)("input",{type:"password",onChange:function(e){return a(e.target.value)},className:"form-control",placeholder:"Enter new password",disabled:i,value:c}),Object(C.jsx)("button",{className:"btn btn-primary",disabled:!c||c.length<6||i,children:"Submit"})]})})]})]})})},Ye=c(751),_e=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){s()}),[]);var s=function(){return Fe(r.token).then((function(e){console.log(e),a(e.data.wishlist)}))};return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-2",children:Object(C.jsx)(Ce,{})}),Object(C.jsxs)("div",{className:"col-md-10",children:[Object(C.jsx)("h4",{children:"Wishlist"}),c.map((function(e){return Object(C.jsxs)("div",{className:"alert alert-secondary",children:[Object(C.jsxs)(N.b,{to:"{`/product/${p.slug}`}",children:[e.title," ~ ",e.artist," ~ ",e.label]}),Object(C.jsx)("span",{onClick:function(){return t=e._id,Ue(t,r.token).then((function(e){s()}));var t},className:"btn btn-sm float-right",children:Object(C.jsx)(Ye.a,{className:"text-danger"})})]},e._id)}))]})]})})},Je=function(){return Object(C.jsx)("nav",{children:Object(C.jsxs)("ul",{className:"nav flex-column",children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(N.b,{to:"/admin/dashboard",className:"nav-link",children:"Dashboard"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(N.b,{to:"/admin/product",className:"nav-link",children:"Product"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(N.b,{to:"/admin/products",className:"nav-link",children:"Products"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(N.b,{to:"/admin/category",className:"nav-link",children:"Category"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(N.b,{to:"/user/password",className:"nav-link",children:"Password"})})]})})},Ze=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://indeeprecords.herokuapp.com/api","/admin/orders"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(j.a)(u.a.mark((function e(t,c,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("".concat("https://indeeprecords.herokuapp.com/api","/admin/order-status"),{orderId:t,orderStatus:c},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),et=function(e){var t=e.orders,c=e.handleStatusChange,n=function(e){return Object(C.jsxs)("table",{className:"table table-bordered",children:[Object(C.jsx)("thead",{className:"thead-light",children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{scope:"col",children:"Title"}),Object(C.jsx)("th",{scope:"col",children:"Artist"}),Object(C.jsx)("th",{scope:"col",children:"Label"}),Object(C.jsx)("th",{scope:"col",children:"Price"}),Object(C.jsx)("th",{scope:"col",children:"Count"})]})}),Object(C.jsx)("tbody",{children:e.products.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsx)("b",{children:e.product.title})}),Object(C.jsx)("td",{children:e.product.artist}),Object(C.jsx)("td",{children:e.product.label}),Object(C.jsxs)("td",{children:["\u20ac",e.product.price]}),Object(C.jsx)("td",{children:e.count})]},t)}))})]})};return Object(C.jsx)(C.Fragment,{children:t.map((function(e){return Object(C.jsxs)("div",{className:"row pb-5",children:[Object(C.jsxs)("div",{className:"btn btn-block bg-light",children:[Object(C.jsx)(Le,{order:e,showStatus:!1}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-4",children:"Delivery Status"}),Object(C.jsx)("div",{className:"col-md-8",children:Object(C.jsxs)("select",{className:"form-control",onChange:function(t){return c(e._id,t.target.value)},name:"status",defaultValue:e.orderStatus,children:[Object(C.jsx)("option",{value:"Not Processed",children:"Not Processed"}),Object(C.jsx)("option",{value:"Processing",children:"Processing"}),Object(C.jsx)("option",{value:"Dispatched",children:"Dispatched"}),Object(C.jsx)("option",{value:"Cancelled",children:"Cancelled"}),Object(C.jsx)("option",{value:"Competed",children:"Competed"})]})})]})]}),n(e)]},e._id)}))})},tt=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){s()}),[]);var s=function(){return Ze(r.token).then((function(e){console.log(JSON.stringify(e.data,null,4)),a(e.data)}))};return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-2",children:Object(C.jsx)(Je,{})}),Object(C.jsxs)("div",{className:"col",children:[Object(C.jsx)("h4",{children:"Admin Dashboard"}),Object(C.jsx)(et,{orders:c,handleStatusChange:function(e,t){$e(e,t,r.token).then((function(e){b.b.success("Status updated"),s()}))}})]})]})})},ct=c(752),nt=function(e){var t=e.handleSubmit,c=e.name,n=e.setName;return Object(C.jsx)("form",{onSubmit:t,children:Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Name"}),Object(C.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return n(e.target.value)},value:c,autoFocus:!0,required:!0}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{className:"btn btn-outline-primary",children:"Save"})]})})},at=function(e){var t=e.keyword,c=e.setKeyword;return Object(C.jsx)("div",{children:Object(C.jsx)("input",{type:"search",placeholder:"Filter",value:t,onChange:function(e){e.preventDefault(),c(e.target.value.toLowerCase())},className:"form-control mb-4"})})},rt=function(){var e=Object(i.c)((function(e){return Object(h.a)({},e)})).user,t=Object(n.useState)(""),c=Object(p.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(!1),o=Object(p.a)(s,2),l=o[0],d=o[1],O=Object(n.useState)([]),m=Object(p.a)(O,2),x=m[0],f=m[1],g=Object(n.useState)(""),v=Object(p.a)(g,2),y=v[0],w=v[1];Object(n.useEffect)((function(){S()}),[]);var S=function(){return ne().then((function(e){return f(e.data)}))},k=function(){var t=Object(j.a)(u.a.mark((function t(c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.confirm("Delete?")&&(d(!0),re(c,e.token).then((function(e){d(!1),b.b.error("".concat(e.data.name," deleted")),S()})).catch((function(e){400===e.response.status&&(d(!1),b.b.error(e.response.data))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-2",children:Object(C.jsx)(Je,{})}),Object(C.jsxs)("div",{className:"col",children:[l?Object(C.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(C.jsx)("h4",{children:"Create category"}),Object(C.jsx)(nt,{handleSubmit:function(t){t.preventDefault(),d(!0),ie({name:a},e.token).then((function(e){d(!1),r(""),b.b.success('"'.concat(e.data.name,'" is created')),S()})).catch((function(e){console.log(e),d(!1),400===e.response.status&&b.b.error(e.response.data)}))},name:a,setName:r}),Object(C.jsx)(at,{keyword:y,setKeyword:w}),x.filter(function(e){return function(t){return t.name.toLowerCase().includes(e)}}(y)).map((function(e){return Object(C.jsxs)("div",{className:"alert alert-secondary",children:[e.name,Object(C.jsx)("span",{onClick:function(){return k(e.slug)},className:"btn btn-sm float-right",children:Object(C.jsx)(Ye.a,{className:"text-danger"})}),Object(C.jsx)(N.b,{to:"/admin/category/".concat(e.slug),children:Object(C.jsx)("span",{className:"btn btn-sm float-right",children:Object(C.jsx)(ct.a,{className:"text-warning"})})})]},e._id)}))]})]})})},st=function(e){var t=e.history,c=e.match,a=Object(i.c)((function(e){return Object(h.a)({},e)})).user,r=Object(n.useState)(""),s=Object(p.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(!1),j=Object(p.a)(u,2),d=j[0],O=j[1];Object(n.useEffect)((function(){m()}),[]);var m=function(){return ae(c.params.slug).then((function(e){return l(e.data.name)}))};return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-2",children:Object(C.jsx)(Je,{})}),Object(C.jsxs)("div",{className:"col",children:[d?Object(C.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(C.jsx)("h4",{children:"Update category"}),Object(C.jsx)(nt,{handleSubmit:function(e){e.preventDefault(),O(!0),se(c.params.slug,{name:o},a.token).then((function(e){O(!1),l(""),b.b.success('"'.concat(e.data.name,'" is updated')),t.push("/admin/category")})).catch((function(e){console.log(e),O(!1),400===e.response.status&&b.b.error(e.response.data)}))},name:o,setName:l}),Object(C.jsx)("hr",{})]})]})})},it=c(141),ot=c(172),lt=(ot.a.Option,function(e){var t=e.handleSubmit,c=e.handleChange,n=(e.setValues,e.values),a=e.handleCategoryChange,r=(e.subOptions,e.showSub,n.title),s=n.description,i=n.price,o=n.categories,l=(n.category,n.subs,n.artist),u=(n.quantity,n.images,n.mediaCondition,n.sleeveCondition,n.format),j=n.mediaConditions,d=n.sleeveConditions,b=n.formats,h=(n.catno,n.status,n.label);return Object(C.jsxs)("form",{onSubmit:t,children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Title"}),Object(C.jsx)("input",{type:"text",name:"title",className:"form-control",value:r,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Description"}),Object(C.jsx)("input",{type:"text",name:"description",className:"form-control",value:s,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Price"}),Object(C.jsx)("input",{type:"number",name:"price",className:"form-control",value:i,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Artist"}),Object(C.jsx)("input",{type:"text",name:"artist",className:"form-control",value:l,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Label"}),Object(C.jsx)("input",{type:"text",name:"label",className:"form-control",value:h,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Format"}),Object(C.jsx)("select",{value:u,name:"format",className:"form-control",onChange:c,children:b.map((function(e){return Object(C.jsx)("option",{value:e,children:e},e)}))})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Media Condition"}),Object(C.jsxs)("select",{name:"mediaCondition",className:"form-control",onChange:c,children:[Object(C.jsx)("option",{children:"Please select"}),j.map((function(e){return Object(C.jsx)("option",{value:e,children:e},e)}))]})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Sleeve Condition"}),Object(C.jsxs)("select",{name:"sleeveCondition",className:"form-control",onChange:c,children:[Object(C.jsx)("option",{children:"Please select"}),d.map((function(e){return Object(C.jsx)("option",{value:e,children:e},e)}))]})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Category"}),Object(C.jsxs)("select",{name:"category",className:"form-control",onChange:a,children:[Object(C.jsx)("option",{children:"Please select"}),o.length>0&&o.map((function(e){return Object(C.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{className:"btn btn-outline-info",children:"Save"})]})}),ut=c(398),jt=c.n(ut),dt=c(736),bt=function(e){var t=e.values,c=e.setValues,n=e.setLoading,a=Object(i.c)((function(e){return Object(h.a)({},e)})).user;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"row",children:t.images&&t.images.map((function(e){return Object(C.jsx)(be.a,{count:"x",onClick:function(){return r=e.public_id,n(!0),console.log("remove image : ",r),void w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/removeimage"),{public_id:r},{headers:{authtoken:a?a.token:""}}).then((function(e){n(!1);var a=t.images.filter((function(e){return e.public_id!==r}));c(Object(h.a)(Object(h.a)({},t),{},{images:a}))})).catch((function(e){console.log(e),n(!1)}));var r},style:{cursor:"pointer"},children:Object(C.jsx)(dt.a,{src:e.url,size:100,className:"ml-3",shape:"square"})},e.public_id)}))}),Object(C.jsx)("div",{className:"row mt-3",children:Object(C.jsxs)("label",{className:"btn btn-primary btn-raised",children:["Choose File",Object(C.jsx)("input",{type:"file",multiple:!0,hidden:!0,accept:"images/*",onChange:function(e){var r=e.target.files,s=t.images;if(r){n(!0);for(var i=0;i<r.length;i++)jt.a.imageFileResizer(r[i],720,720,"JPEG",100,0,(function(e){w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/uploadimages"),{image:e},{headers:{authtoken:a?a.token:""}}).then((function(e){console.log("image upload response data",e),n(!1),s.push(e.data),c(Object(h.a)(Object(h.a)({},t),{},{images:s}))})).catch((function(e){n(!1),console.log("cloudinary up`load error",e)}))}),"base64")}}})]})})," "]})},ht=c(173),pt={title:"Record Title",artist:"Artist",label:"label",description:"Description of the record",price:" ",categories:[],category:"",quantity:"1",images:[],mediaConditions:["New","Mint","Near Mint","VG+","VG","Generic"],sleeveConditions:["New","Mint","Near Mint","VG+","VG","Generic"],catno:"",formats:['12"','7"'],format:"",mediaCondition:"",sleeveCondition:""},Ot=function(){var e=Object(n.useState)(pt),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(p.a)(r,2),o=(s[0],s[1],Object(n.useState)(!1)),l=Object(p.a)(o,2),u=(l[0],l[1],Object(n.useState)(!1)),j=Object(p.a)(u,2),d=j[0],O=j[1],m=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){x()}),[]);var x=function(){return ne().then((function(e){return a(Object(h.a)(Object(h.a)({},c),{},{categories:e.data}))}))};return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-2",children:Object(C.jsx)(Je,{})}),Object(C.jsxs)("div",{className:"col-md-10",children:[d?Object(C.jsx)(ht.a,{className:"text-danger h1"}):Object(C.jsx)("h4",{children:"Product create"}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"p-3",children:Object(C.jsx)(bt,{values:c,setValues:a,setLoading:O})}),Object(C.jsx)(lt,{handleSubmit:function(e){e.preventDefault(),Q(c,m.token).then((function(e){console.log(e),window.alert('"'.concat(e.data.title,'" is created')),window.location.reload()})).catch((function(e){console.log(e),b.b.error(e.response.data.err)}))},handleChange:function(e){a(Object(h.a)(Object(h.a)({},c),{},Object(it.a)({},e.target.name,e.target.value)))},setValues:a,values:c,handleCategoryChange:function(e){e.preventDefault(),console.log("CLICKED CATEGORY",e.target.value),a(Object(h.a)(Object(h.a)({},c),{},{category:e.target.value}))}})]})]})})},mt=c(220),xt=R.a.Meta,ft=function(e){var t=e.product,c=e.handleRemove,n=t.title,a=(t.description,t.images),r=t.slug;t.artist,t.label,t.price;return Object(C.jsx)(R.a,{cover:Object(C.jsx)("img",{src:a&&a.length?a[0].url:F,style:{height:"250px",objectFit:"cover"},className:"p-1"}),actions:[Object(C.jsx)(N.b,{to:"/admin/product/".concat(r),children:Object(C.jsx)(ct.a,{className:"text-warning"})}),Object(C.jsx)(Ye.a,{onClick:function(){return c(r)},className:"text-danger"})],children:Object(C.jsx)(xt,{title:n})})},gt=c(740),vt=c(730),Nt=c(753),yt=c(754),wt=de.a.SubMenu,St=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(p.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)([0,0]),j=Object(p.a)(u,2),d=j[0],O=j[1],m=Object(n.useState)(!1),x=Object(p.a)(m,2),f=x[0],g=x[1],v=Object(n.useState)([]),N=Object(p.a)(v,2),y=N[0],w=N[1],S=Object(n.useState)([]),k=Object(p.a)(S,2),A=k[0],I=k[1],E=Object(i.b)(),R=Object(i.c)((function(e){return Object(h.a)({},e)})).search.text,T=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){D(),ne().then((function(e){return w(e.data)}))}),[]);var D=function(){l(!0),H(2e3).then((function(e){a(e.data),l(!1)})).catch((function(e){l(!1),console.log(e)}))};Object(n.useEffect)((function(){var e=setTimeout((function(){P({query:R})}),300);return function(){return clearTimeout(e)}}),[R]);var P=function(e){X(e).then((function(e){a(e.data)}))};Object(n.useEffect)((function(){console.log("ok to request"),P({price:d})}),[f]);var F=function(e){E({type:"SEARCH_QUERY",payload:{text:""}}),O([0,0]);var t=Object(mt.a)(A),c=e.target.value,n=t.indexOf(c);-1===n?t.push(c):t.splice(n,1),I(t),console.log(t),P({category:t})},U=function(e){window.confirm("Delete?")&&K(e,T.token).then((function(e){D(),b.b.error("".concat(e.data.title," is deleted"))})).catch((function(e){400===e.response.status&&b.b.error(e.response.data),console.log(e)}))};return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"col-md-2",children:[Object(C.jsx)(Je,{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("h5",{children:"Search / Filter / Sort"}),Object(C.jsx)("hr",{}),Object(C.jsxs)(de.a,{defaultOpenKeys:["1","2"],mode:"inline",children:[Object(C.jsx)(wt,{title:Object(C.jsxs)("span",{className:"h6",children:[Object(C.jsx)(Nt.a,{})," Price"]}),children:Object(C.jsx)("div",{children:Object(C.jsx)(vt.a,{className:"ml-4 mr-4",tipFormatter:function(e){return"\u20ac".concat(e)},range:!0,value:d,onChange:function(e){E({type:"SEARCH_QUERY",payload:{text:""}}),I([]),O(e),setTimeout((function(){g(!f)}),300)},max:"1000"})})},"1"),Object(C.jsx)(wt,{title:Object(C.jsxs)("span",{className:"h6",children:[Object(C.jsx)(yt.a,{})," Categories"]}),children:Object(C.jsx)("div",{style:{marginTop:"-10px"},children:y.map((function(e){return Object(C.jsxs)("div",{children:[Object(C.jsx)(gt.a,{onChange:F,className:"pb-2 pl-4 pr-4",value:e._id,name:"category",checked:A.includes(e._id),children:e.name}),Object(C.jsx)("br",{})]},e._id)}))})},"2")]})]}),Object(C.jsxs)("div",{className:"col",children:[o?Object(C.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(C.jsx)("h4",{children:"All Products"}),Object(C.jsx)("div",{className:"row",children:c.map((function(e){return Object(C.jsx)("div",{className:"col-md-3 pb-3",children:Object(C.jsx)(ft,{product:e,handleRemove:U})},e._id)}))})]})]})})},kt=(ot.a.Option,function(e){var t=e.handleSubmit,c=e.handleChange,n=(e.setValues,e.values),a=e.handleCategoryChange,r=e.categories,s=(e.subOptions,e.arrayOfSubs,e.setArrayOfSubs,e.selectedCategory),i=n.title,o=n.artist,l=n.label,u=n.description,j=n.price,d=n.category,b=(n.subs,n.quantity),h=(n.sold,n.catno,n.sleeveCondition),p=n.mediaCondition,O=n.format,m=n.sleeveConditions,x=n.mediaConditions,f=n.formats,g=n.status;return Object(C.jsxs)("form",{onSubmit:t,children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Title"}),Object(C.jsx)("input",{type:"text",name:"title",className:"form-control",value:i,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Artist"}),Object(C.jsx)("input",{type:"text",name:"title",className:"form-control",value:o,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Label"}),Object(C.jsx)("input",{type:"text",name:"title",className:"form-control",value:l,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Description"}),Object(C.jsx)("input",{type:"text",name:"description",className:"form-control",value:u,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Price"}),Object(C.jsx)("input",{type:"number",name:"price",className:"form-control",value:j,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Quantity"}),Object(C.jsx)("input",{type:"number",name:"quantity",className:"form-control",value:b,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Status"}),Object(C.jsx)("input",{type:"text",name:"status",className:"form-control",value:g,onChange:c})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Format"}),Object(C.jsx)("select",{value:O,name:"format",className:"form-control",onChange:c,children:f.map((function(e){return Object(C.jsx)("option",{value:e,children:e},e)}))})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Media Condition"}),Object(C.jsx)("select",{value:p,name:"mediaCondition",className:"form-control",onChange:c,children:x.map((function(e){return Object(C.jsx)("option",{value:e,children:e},e)}))})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Sleeve Condition"}),Object(C.jsx)("select",{value:h,name:"sleeveCondition",className:"form-control",onChange:c,children:m.map((function(e){return Object(C.jsx)("option",{value:e,children:e},e)}))})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Category"}),Object(C.jsx)("select",{name:"category",className:"form-control",onChange:a,value:s||d._id,children:r.length>0&&r.map((function(e){return Object(C.jsx)("option",{value:e._id,children:e.name},e._id)}))})]}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{className:"btn btn-outline-info",children:"Save"})]})}),At={title:"",description:"",artist:"",label:"",catno:"",formats:[' 12" ',' 7in" '],price:"",category:"",subs:[],quantity:"",images:[],mediaConditions:["New","Mint","Near Mint","VG+","VG"],sleeveConditions:["New","Mint","Near Mint","VG+","VG","Generic"],format:"",mediaCondition:"",sleeveCondition:""},Ct=function(e){var t=e.match,c=e.history,a=Object(n.useState)(At),r=Object(p.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)([]),u=Object(p.a)(l,2),j=u[0],d=u[1],O=Object(n.useState)([]),m=Object(p.a)(O,2),x=m[0],f=(m[1],Object(n.useState)([])),g=Object(p.a)(f,2),v=g[0],N=g[1],y=Object(n.useState)(""),w=Object(p.a)(y,2),S=w[0],k=w[1],A=Object(n.useState)(!1),I=Object(p.a)(A,2),E=I[0],R=I[1],T=Object(i.c)((function(e){return Object(h.a)({},e)})).user,D=t.params.slug;Object(n.useEffect)((function(){P(),F()}),[]);var P=function(){W(D).then((function(e){o(Object(h.a)(Object(h.a)({},s),e.data))}))},F=function(){return ne().then((function(e){console.log("GET CATEGORIES IN UPDATE PRODUCT",e.data),d(e.data)}))};return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-2",children:Object(C.jsx)(Je,{})}),Object(C.jsxs)("div",{className:"col-md-10",children:[E?Object(C.jsx)(ht.a,{className:"text-danger h1"}):Object(C.jsx)("h4",{children:"Product update"}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"p-3",children:Object(C.jsx)(bt,{values:s,setValues:o,setLoading:R})}),Object(C.jsx)(kt,{handleSubmit:function(e){e.preventDefault(),R(!0),s.category=S||s.category,q(D,s,T.token).then((function(e){R(!1),b.b.success('"'.concat(e.data.title,'" is updated')),c.push("/admin/products")})).catch((function(e){console.log(e),R(!1),b.b.error(e.response.data.err)}))},handleChange:function(e){o(Object(h.a)(Object(h.a)({},s),{},Object(it.a)({},e.target.name,e.target.value)))},setValues:o,values:s,handleCategoryChange:function(e){e.preventDefault(),console.log("CLICKED CATEGORY",e.target.value),o(Object(h.a)({},s)),k(e.target.value),console.log("EXISTING CATEGORY values.category",s.category)},categories:j,subOptions:x,arrayOfSubs:v,setArrayOfSubs:N,selectedCategory:S}),Object(C.jsx)("hr",{})]})]})})},It=c(399),Et=(c(624),c(280)),Rt=c(755),Tt=function(e){var t=e.product,c=t.title,n=t.artist,a=t.label,r=t.catno,s=t.format,i=t.price,o=t.mediaCondition,l=t.sleeveCondition,u=t.category,j=(t.description,t.quantity);t.sold,t.subs;return Object(C.jsxs)("ul",{className:"list-group",children:[Object(C.jsxs)("li",{className:"list-group-item",children:["Price"," ",Object(C.jsxs)("span",{className:"label-default label-pill pull-xs-right",children:["\u20ac",i]})]}),u&&Object(C.jsxs)("li",{className:"list-group-item",children:["Category"," ",Object(C.jsx)(N.b,{to:"/category/".concat(u.slug),className:" label label-default label-pill pull-xs-right",children:u.name})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["title"," ",Object(C.jsx)("span",{className:"label-default label-pill pull-xs-right",children:c})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["artist"," ",Object(C.jsx)("span",{className:"label-default label-pill pull-xs-right",children:n})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["label"," ",Object(C.jsx)("span",{className:"label-default label-pill pull-xs-right",children:a})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["Media Condition"," ",Object(C.jsx)("span",{className:"label-default label-pill pull-xs-right",children:o})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["Sleeve Condition"," ",Object(C.jsx)("span",{className:"label-default label-pill pull-xs-right",children:l})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["Cat no."," ",Object(C.jsx)("span",{className:"label-default label-pill pull-xs-right",children:r})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["Available"," ",Object(C.jsx)("span",{className:"label-default label-pill pull-xs-right",children:j})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["Format"," ",Object(C.jsx)("span",{className:"label-default label-pill pull-xs-right",children:s})]})]})},Dt=(c(625),c(400)),Pt=c.n(Dt),Ft=(Et.a.TabPane,function(e){var t=e.product,c=t.title,a=t.description,r=t.images,s=(t.sound,Object(n.useState)("Click to add")),o=Object(p.a)(s,2),l=o[0],u=o[1],j=Object(i.c)((function(e){return Object(h.a)({},e)})),O=j.user,m=(j.cart,Object(i.b)()),x=Object(d.f)();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"col-md-5",children:r&&r.length?Object(C.jsx)("div",{className:"carousel-container",children:Object(C.jsx)(It.Carousel,{showArrows:!0,autoPlay:!0,infiniteLoop:!0,children:r&&r.map((function(e){return Object(C.jsx)("img",{src:e.url},e.public_id)}))})}):Object(C.jsx)(R.a,{cover:Object(C.jsx)("img",{src:F,className:"mb-3 card-image"})})}),Object(C.jsxs)("div",{className:"col-md-3",children:[Object(C.jsx)("div",{children:a&&a}),Object(C.jsx)("div",{className:"pt-5",children:Object(C.jsx)(Pt.a,{src:t.sound,autoPlay:!0,controls:!0})})]}),Object(C.jsxs)("div",{className:"col-md-4",children:[Object(C.jsx)("h1",{className:"bg-info p-3",children:c}),Object(C.jsx)(R.a,{actions:[Object(C.jsx)(T.a,{title:l,children:Object(C.jsxs)("a",{onClick:function(){var e=[];if("undefined"!==typeof window){localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart"))),e.push(Object(h.a)(Object(h.a)({},t),{},{count:1}));var c=B.a.uniqWith(e,B.a.isEqual);localStorage.setItem("cart",JSON.stringify(c)),u("Added"),m({type:"ADD_TO_CART",payload:c}),m({type:"SET_VISIBLE",payload:!0})}},children:[Object(C.jsx)(P.a,{className:"text-danger"})," ",Object(C.jsx)("br",{})," Add to Cart"]})}),Object(C.jsxs)("a",{onClick:function(e){e.preventDefault(),Be(t._id,O.token).then((function(e){console.log("ADDED TO WISHLIST",e.data),b.b.success("Added to wishlist"),x.push("/user/wishlist")}))},children:[Object(C.jsx)(Rt.a,{className:"text-info"}),Object(C.jsx)("br",{}),"Add to Wishlist"]})],children:Object(C.jsx)(Tt,{product:t})})]})]})}),Ut=function(e){var t=e.match,c=Object(n.useState)({}),a=Object(p.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)([]),o=Object(p.a)(i,2),l=o[0],u=o[1],j=t.params.slug;Object(n.useEffect)((function(){d()}),[j]);var d=function(){W(j).then((function(e){s(e.data),M(e.data._id).then((function(e){return u(e.data)}))}))};return Object(C.jsxs)("div",{className:"container-fluid",children:[Object(C.jsx)("div",{className:"row pt-4",children:Object(C.jsx)(Ft,{product:r})}),Object(C.jsx)("div",{className:"row p-5",children:Object(C.jsxs)("div",{className:"col text-center pt-5 pb-5",children:[Object(C.jsx)("hr",{}),Object(C.jsx)("h4",{children:"Related Products"}),Object(C.jsx)("hr",{})]})}),Object(C.jsx)("div",{className:"row pb-5",children:l.length?l.map((function(e){return Object(C.jsx)("div",{className:"col-md-3",children:Object(C.jsx)(V,{product:e})},e._id)})):Object(C.jsx)("div",{className:"text-center col ",children:"'No products found'"})})]})},Bt=function(e){var t=e.match,c=Object(n.useState)({}),a=Object(p.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)([]),o=Object(p.a)(i,2),l=o[0],u=o[1],j=Object(n.useState)(!1),d=Object(p.a)(j,2),b=d[0],h=d[1],O=t.params.slug;return Object(n.useEffect)((function(){h(!0),ae(O).then((function(e){console.log(JSON.stringify(e.data,null,4)),s(e.data.category),u(e.data.products),h(!1)}))}),[]),Object(C.jsxs)("div",{className:"container-fluid",children:[Object(C.jsx)("div",{className:"row",children:Object(C.jsx)("div",{className:"col",children:b?Object(C.jsx)("h4",{className:"text-center p-3 mt-5 mb-5 display-4 jumbotron",children:"Loading..."}):Object(C.jsxs)("h4",{className:"text-center p-3 mt-5 mb-5 display-4 jumbotron",children:[l.length,' Products in "',r.name,'" category']})})}),Object(C.jsx)("div",{className:"row",children:l.map((function(e){return Object(C.jsx)("div",{className:"col",children:Object(C.jsx)(V,{product:e})},e._id)}))})]})},Lt=de.a.SubMenu,Vt=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(p.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)([0,0]),j=Object(p.a)(u,2),d=j[0],b=j[1],O=Object(n.useState)(!1),m=Object(p.a)(O,2),x=m[0],f=m[1],g=Object(n.useState)([]),v=Object(p.a)(g,2),N=v[0],y=v[1],w=Object(n.useState)([]),S=Object(p.a)(w,2),k=S[0],A=S[1],I=Object(i.b)(),E=Object(i.c)((function(e){return Object(h.a)({},e)})).search.text;Object(n.useEffect)((function(){R(),ne().then((function(e){return y(e.data)}))}),[]);var R=function(){H(2e3).then((function(e){a(e.data),l(!1)}))};Object(n.useEffect)((function(){var e=setTimeout((function(){T({query:E}),E||R()}),300);return function(){return clearTimeout(e)}}),[E]);var T=function(e){X(e).then((function(e){a(e.data)}))};Object(n.useEffect)((function(){console.log("ok to request"),T({price:d})}),[x]);var D=function(e){I({type:"SEARCH_QUERY",payload:{text:""}}),b([0,0]);var t=Object(mt.a)(k),c=e.target.value,n=t.indexOf(c);-1===n?t.push(c):t.splice(n,1),A(t),console.log(t),T({category:t})};return Object(C.jsx)("div",{className:"container-fluid",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"col-md-2 pt-2",children:[Object(C.jsx)("hr",{}),Object(C.jsx)("h5",{children:"Search / Filter / Sort"}),Object(C.jsx)("hr",{}),Object(C.jsxs)(de.a,{defaultOpenKeys:["1","2"],mode:"inline",children:[Object(C.jsx)(Ne,{className:"m-4 pb-10"}),Object(C.jsx)("hr",{}),Object(C.jsx)(Lt,{title:Object(C.jsxs)("span",{className:"h6",children:[Object(C.jsx)(Nt.a,{})," Price"]}),children:Object(C.jsx)("div",{children:Object(C.jsx)(vt.a,{className:"ml-4 mr-4",tipFormatter:function(e){return"\u20ac".concat(e)},range:!0,value:d,onChange:function(e){I({type:"SEARCH_QUERY",payload:{text:""}}),A([]),b(e),setTimeout((function(){f(!x)}),300)},max:"1000"})})},"1"),Object(C.jsx)(Lt,{title:Object(C.jsxs)("span",{className:"h6",children:[Object(C.jsx)(yt.a,{})," Categories"]}),children:Object(C.jsx)("div",{style:{marginTop:"-10px"},children:N.map((function(e){return Object(C.jsxs)("div",{children:[Object(C.jsx)(gt.a,{onChange:D,className:"pb-2 pl-4 pr-4",value:e._id,name:"category",checked:k.includes(e._id),children:e.name}),Object(C.jsx)("br",{})]},e._id)}))})},"2")]})]}),Object(C.jsxs)("div",{className:"col-md-9 pt-2",children:[o?Object(C.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(C.jsx)("h4",{className:"text-danger",children:"Products"}),c.length<1&&Object(C.jsx)("p",{children:"No products found"}),Object(C.jsx)("div",{className:"row pb-5",children:c.map((function(e){return Object(C.jsx)("div",{className:"col-md-3 pb-3",children:Object(C.jsx)(V,{product:e})},e._id)}))})]})]})})},Qt=c(281),Ht=c(149),Kt=function(e){var t=e.p,c=Object(i.b)();return Object(C.jsx)("tbody",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsx)("div",{className:"",style:{width:"100px",height:"100px"},children:t.images.length?Object(C.jsx)(Qt.a,{small:t.images[0].url,large:t.images[0].url}):Object(C.jsx)(Qt.a,{small:F,large:F})})}),Object(C.jsx)("td",{children:t.title}),Object(C.jsx)("td",{children:t.artist}),Object(C.jsx)("td",{children:t.label}),Object(C.jsxs)("td",{children:["\u20ac",t.price]}),console.log("P.COUNT=======>",t.count),console.log("P.QUANTITY=======>",t.quantity),Object(C.jsx)("td",{className:"text-center",children:Object(C.jsx)("input",{type:"number",className:"form-control",value:t.count,onChange:function(e){var n=e.target.value<1?1:e.target.value;if(n>t.quantity)b.b.error("Max available quantity : ".concat(t.quantity));else{var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(e,c){e._id==t._id&&(a[c].count=n)})),localStorage.setItem("cart",JSON.stringify(a)),c({type:"ADD_TO_CART",payload:a}))}}})}),Object(C.jsx)("td",{className:"text-center",children:Object(C.jsx)(Ht.a,{onClick:function(){var e=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart"))),e.map((function(c,n){c._id===t._id&&e.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(e)),c({type:"ADD_TO_CART",payload:e}))},className:"text-danger pointer"})})]})})},Wt=function(e){var t=e.history,c=Object(i.c)((function(e){return Object(h.a)({},e)})),n=c.cart,a=c.user;Object(i.b)();return Object(C.jsx)("div",{className:"container-fluid pt-2",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"col-md-8",children:[Object(C.jsxs)("h4",{children:["Cart / ",n.length," products"]}),n.length?Object(C.jsxs)("table",{className:"table table-bordered",children:[Object(C.jsx)("thead",{className:"thead-light",children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{scope:"col",children:"Image"}),Object(C.jsx)("th",{scope:"col",children:"Title"}),Object(C.jsx)("th",{scope:"col",children:"Artist"}),Object(C.jsx)("th",{scope:"col",children:"Label"}),Object(C.jsx)("th",{scope:"col",children:"Price"}),Object(C.jsx)("th",{scope:"col",children:"Count"}),Object(C.jsx)("th",{scope:"col",children:"Remove"})]})}),n.map((function(e){return Object(C.jsx)(Kt,{p:e},e._id)}))]}):Object(C.jsxs)("p",{children:["No products in cart. ",Object(C.jsx)(N.b,{to:"./shop",children:"Continue shopping"})]})]}),Object(C.jsxs)("div",{className:"col-md-4",children:[Object(C.jsx)("h4",{children:"Order Summary"}),Object(C.jsx)("hr",{}),Object(C.jsx)("p",{children:"Products"}),n.map((function(e,t){return Object(C.jsx)("div",{children:Object(C.jsxs)("p",{children:[e.title," x ",e.count," = \u20ac",e.price*e.count]})},t)})),Object(C.jsx)("hr",{}),"Total: ",Object(C.jsxs)("b",{children:["\u20ac",n.reduce((function(e,t){return e+t.count*t.price}),0)]}),Object(C.jsx)("hr",{}),a?Object(C.jsx)("button",{onClick:function(){Ie(n,a.token).then((function(e){console.log("CART POST RESPONSE ------",e),e.data.ok&&t.push("/checkout")})).catch((function(e){return console.log("cart save error",e)})),t.push("/checkout")},className:"btn btn-sm btn-primary mt-2",disabled:!n.length,children:"Proceed to checkout"}):Object(C.jsx)("button",{className:"btn btn-sm btn-primary mt-2",children:Object(C.jsx)(N.b,{to:{pathname:"/login",state:{from:"cart"}},children:" Login to checkout"})})]})]})})},qt=c(401),Gt=c.n(qt),zt=(c(724),c(725),function(e){var t=e.history,c=Object(n.useState)([]),a=Object(p.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(0),l=Object(p.a)(o,2),u=l[0],j=l[1],d=Object(n.useState)("test"),O=Object(p.a)(d,2),m=O[0],x=O[1],f=Object(n.useState)(!1),g=Object(p.a)(f,2),v=g[0],N=g[1],y=Object(i.b)(),w=Object(i.c)((function(e){return Object(h.a)({},e)})).user;Object(n.useEffect)((function(){Ee(w.token).then((function(e){s(e.data.products),j(e.data.cartTotal)}))}),[]);return Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"col-md-6",children:[Object(C.jsx)("h4",{children:"Delivery Address"}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)(Gt.a,{theme:"snow",value:m,onChange:x}),Object(C.jsx)("button",{className:"btn btn-primary mt-2",onClick:function(){console.log("address :",m),Te(w.token,m).then((function(e){e.data.ok?(N(!0),b.b.success("Address Saved")):b.b.warning("address not saved")}))},children:"Save"}),Object(C.jsx)("hr",{})]}),Object(C.jsxs)("div",{className:"col-md-6",children:[Object(C.jsx)("h4",{children:"Order Summary"}),Object(C.jsx)("hr",{}),Object(C.jsxs)("p",{children:["Products ",r.length," "]}),Object(C.jsx)("hr",{}),r.map((function(e,t){return Object(C.jsx)("div",{children:Object(C.jsxs)("p",{children:[e.product.title," x ",e.count," = \u20ac",e.product.price*e.count]})},t)})),Object(C.jsx)("hr",{}),Object(C.jsxs)("p",{children:["Cart Total: \u20ac",u]}),Object(C.jsx)("div",{className:"row",children:Object(C.jsxs)("div",{className:"col-md-6",children:[Object(C.jsx)("button",{disabled:!v||!r.length,className:"btn btn-primary",onClick:function(){return t.push("/payment")},children:"Place Order"}),Object(C.jsx)("button",{disabled:!r.length,onClick:function(){"undefined"!==typeof window&&localStorage.removeItem("cart"),y({type:"ADD_TO_CART",payload:[]}),Re(w.token).then((function(e){s([]),j(0),b.b.success("Cart is empty. Continue shopping")}))},className:"btn btn-primary",children:"Empty Cart"})]})})]})]})}),Mt=c(402),Xt=c(132),Yt=function(e){e.history;var t=Object(i.b)(),c=Object(i.c)((function(e){return Object(h.a)({},e)})).user,a=Object(n.useState)(!1),r=Object(p.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(null),d=Object(p.a)(l,2),b=d[0],O=d[1],m=Object(n.useState)(""),x=Object(p.a)(m,2),f=x[0],g=x[1],v=Object(n.useState)(!0),y=Object(p.a)(v,2),S=y[0],k=y[1],A=Object(n.useState)(""),I=Object(p.a)(A,2),E=I[0],R=I[1],T=Object(n.useState)(0),D=Object(p.a)(T,2),P=(D[0],D[1],Object(Xt.useStripe)()),F=Object(Xt.useElements)();Object(n.useEffect)((function(){var e;(e=c.token,w.a.post("".concat("https://indeeprecords.herokuapp.com/api","/create-payment-intent"),{},{headers:{authtoken:e}})).then((function(e){console.log("create payment intent",e.data),R(e.data.clientSecret),console.log("client secret",E)}))}),[]);var U=function(){var e=Object(j.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),g(!0),e.next=4,P.confirmCardPayment(E,{payment_method:{card:F.getElement(Xt.CardElement),billing_details:{name:n.target.name.value}}});case 4:(a=e.sent).error?(O("Payment failed ".concat(a.error.message)),g(!1)):(console.log(JSON.stringify(a,null,4)),De(a,c.token).then((function(e){console.log("res.data",e.data),e.data.ok&&("undefined"!==typeof window&&localStorage.removeItem("cart"),t({type:"ADD_TO_CART",payload:[]}),Re(c.token))})),O(null),g(!1),o(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t.empty),O(t.error?t.error.message:"");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("p",{className:s?"result-message":"result-message hidden",children:["Payment successful ",Object(C.jsx)(N.b,{to:"/user/history",children:"View your purchase history"})]}),Object(C.jsxs)("form",{id:"payment-form",className:"stripe-form",onSubmit:U,children:[Object(C.jsx)(Xt.CardElement,{id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},onChange:B}),Object(C.jsx)("button",{className:"stripe-button",disabled:f||S||s,children:Object(C.jsx)("span",{id:"button-text",children:f?Object(C.jsx)("div",{className:"spinner",id:"spinner"}):"Pay"})}),Object(C.jsx)("br",{}),b&&Object(C.jsx)("div",{className:"card-error",role:"alert",children:b})]})]})},_t=(c(726),Object(Mt.a)("pk_test_51HykoTFq2ycg13FNvuYLaF0ahXb5GLoqRe2KTQSQsWbCRzdSPw9NBIIUclD8i3EvDSG3e7kqU5IwdBSI8bXhXeg800d9VLE2v4")),Jt=function(){return Object(C.jsxs)("div",{className:"container p-5 text-center",children:[Object(C.jsx)("h4",{children:"Compete your purchase"}),Object(C.jsx)(Xt.Elements,{stripe:_t,children:Object(C.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(C.jsx)(Yt,{})})})]})},Zt=c(738),$t={width:"100%"},ec=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return Object(h.a)({},e)})),c=t.drawer,n=t.cart;return Object(C.jsxs)(Zt.a,{className:"text-center",title:"Cart / ".concat(n.length," products"),placement:"right",onClose:function(){e({type:"SET_VISIBLE",payload:!1})},visible:c,children:[n.map((function(e){return Object(C.jsx)("div",{className:"row",children:Object(C.jsx)("div",{className:"col",children:e.images[0]?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("img",{src:e.images[0].url,style:$t,alt:""}),Object(C.jsxs)("p",{className:"text-center bg-secondary text-light",children:[e.title," x ",e.count]})," "]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("img",{src:F,style:$t,alt:""}),Object(C.jsxs)("p",{className:"text-center bg-secondary text-light",children:[e.title," x ",e.count]})]})})},e._id)})),Object(C.jsx)(N.b,{to:"/cart",children:Object(C.jsx)("button",{onClick:function(){return e({type:"SET_VISIBLE",payload:!1})},className:"btn btn-raised btn-primary btn-block text-center",children:"Go To Cart"})})]})},tc=function(){var e=Object(i.b)();return Object(n.useEffect)((function(){var t=m.onAuthStateChanged(function(){var t=Object(j.a)(u.a.mark((function t(c){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=6;break}return t.next=3,c.getIdTokenResult();case 3:n=t.sent,console.log("user",c),k(n.token).then((function(t){e({type:"LOGGED_IN_USER",payload:{name:t.data.name,email:t.data.email,token:n.token,role:t.data.role,_id:t.data._id}})})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[e]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Se,{}),Object(C.jsx)(ec,{}),Object(C.jsx)(b.a,{}),Object(C.jsxs)(d.c,{children:[Object(C.jsx)(d.a,{exact:!0,path:"/",component:je}),Object(C.jsx)(d.a,{exact:!0,path:"/login",component:I}),Object(C.jsx)(d.a,{exact:!0,path:"/register",component:E}),Object(C.jsx)(d.a,{exact:!0,path:"/register/complete",component:ke}),Object(C.jsx)(d.a,{exact:!0,path:"/forgot/password",component:Ae}),Object(C.jsx)(ze,{exact:!0,path:"/user/history",component:We}),Object(C.jsx)(ze,{exact:!0,path:"/user/password",component:Xe}),Object(C.jsx)(ze,{exact:!0,path:"/user/wishlist",component:_e}),Object(C.jsx)(Me,{exact:!0,path:"/admin/dashboard",component:tt}),Object(C.jsx)(Me,{exact:!0,path:"/admin/category",component:rt}),Object(C.jsx)(Me,{exact:!0,path:"/admin/category/:slug",component:st}),Object(C.jsx)(Me,{exact:!0,path:"/admin/product",component:Ot}),Object(C.jsx)(Me,{exact:!0,path:"/admin/products",component:St}),Object(C.jsx)(Me,{exact:!0,path:"/admin/product/:slug",component:Ct}),Object(C.jsx)(d.a,{exact:!0,path:"/product/:slug",component:Ut}),Object(C.jsx)(d.a,{exact:!0,path:"/category/:slug",component:Bt}),Object(C.jsx)(d.a,{exact:!0,path:"/shop",component:Vt}),Object(C.jsx)(d.a,{exact:!0,path:"/cart",component:Wt}),Object(C.jsx)(ze,{exact:!0,path:"/checkout",component:zt}),Object(C.jsx)(ze,{exact:!0,path:"/payment",component:Jt})]})]})},cc=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,756)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};c(727);var nc=[];"undefined"!==typeof window&&(nc=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]);var ac=Object(s.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN_USER":case"LOGOUT":return t.payload;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_QUERY":return Object(h.a)(Object(h.a)({},e),t.payload);default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return t.payload;default:return e}},drawer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VISIBLE":return t.payload;default:return e}}}),rc=Object(s.createStore)(ac,Object(o.composeWithDevTools)());r.a.render(Object(C.jsx)(i.a,{store:rc,children:Object(C.jsx)(N.a,{children:Object(C.jsx)(tc,{})})}),document.getElementById("root")),cc()}},[[728,1,2]]]);
//# sourceMappingURL=main.a8b5abdb.chunk.js.map